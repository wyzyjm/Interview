# 真实 DOM

-   真实 DOM:
    -   浏览器解析 html 文件, html(DOM 树) + css(style 规则) = 结合为 render 树 -> 通过重排和重绘 渲染到页面上

## 虚拟 DOM

-   本质是一个表示 DOM 结构的 JS 对象, 在真实 DOM 的基础上,创建一个一模一样的副本 (标签类型,它的相关属性,子标签)
-   好处:

    -   1. 提升开发效率: 不必去操作 dom 属性,事件处理, 开发人员可以有更多的精力去关注业务逻辑
    -   2. 关于提升性能: 直接操作 dom 非常消耗性能,这点是肯定的, 但使用虚拟 dom 也无法避免操作 dom,只是减少了 dom 操作
            - 举个例子: 页面添加一个列表, 直接操作 dom 就像是 一个一个的添加, 而虚拟 dom 就像是整个列表在内存中渲染好了,直接一次性添加到页面.
    -   3. 跨平台兼容:

-   React 在内存中维护一个跟真实 dom 一样的虚拟 dom, 通过 diff 算法 找出前后变化差异, 只更新差异的地方, 然后一次性更新真实 DOM,
-   这样做可以大量的减少 dom 操作, 从而有效的减少 DOM 重排 和 重绘, 也就提高了渲染速度.

## diff 算法

-   实际上 React 维护了两个虚拟 dom, 一个是真实 dom 的副本,一个是具有更新状态的虚拟 DOM,
-   首先对比的是节点, 前后节点如果改变, 重新渲染该节点,即使子元素没有变化,也会被重新渲染.

## key 的作用

-   用来判断元素是新创建得还是被移动的元素, 从而减少不必要的渲染.
-   比如一个列表, 当在后面追加一个的时候, 这个列表的更新只有追加的那一个, 当在前面插入的时候, 如果没有 key, 从插入的节点开始,之后的都会重新渲染,
-   而当有 key 的时候, 就只有插入的那段 dom 更新. 删除某一个, 列表不会重新渲染.
-   因此 key 值必须是唯一的值, 不能是随机字符串和 index 索引, 常用数据的 id 来当做 key 值

## 防止 xss 攻击

-   react 渲染时,会把没有 typeof 标识的组件过滤掉
