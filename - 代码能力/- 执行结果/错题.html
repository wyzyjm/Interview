<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <script>
            // const promise1 = new Promise((resolve, reject) => {
            //     setTimeout(() => {
            //         resolve("success")
            //     }, 1000)
            // })
            // const promise2 = promise1.then(() => {
            //     throw new Error("error!!!")
            // })
            // console.log("promise1", promise1)
            // console.log("promise2", promise2)
            // setTimeout(() => {
            //     console.log("promise1", promise1)
            //     console.log("promise2", promise2)
            // }, 2000)
            /*******************************************************/

            /*******************************************************/
            // const promise1 = new Promise((resolve, reject) => {
            //     console.log("promise1")
            //     resolve("resolve1")
            // })
            // const promise2 = promise1.then(res => {
            //     console.log(res)
            // })
            // console.log("1", promise1)
            // console.log("2", promise2)
        </script>
        <script>
            /*******************************************************/
            // const p1 = new Promise(resolve => {
            //     setTimeout(() => {
            //         resolve("resolve3")
            //         console.log("timer1")
            //     }, 0)
            //     resolve("resovle1")
            //     resolve("resolve2")
            // })
            //     .then(res => {
            //         console.log(res) // resolve1
            //         setTimeout(() => {
            //             console.log(p1)
            //         }, 1000)
            //     })
            //     .finally(res => {
            //         console.log("finally", res)
            //     })
            /*******************************************************/
            // const first = () =>
            //     new Promise((resolve, reject) => {
            //         console.log(3)
            //         let p = new Promise((resolve, reject) => {
            //             console.log(7)
            //             setTimeout(() => {
            //                 console.log(5)
            //                 resolve(6)
            //                 console.log(p)
            //             }, 0)
            //             resolve(1)
            //         })
            //         resolve(2)
            //         p.then(arg => {
            //             console.log(arg)
            //         })
            //     })
            // first().then(arg => {
            //     console.log(arg)
            // })
            // console.log(4)
            /*******************************************************/
            // async function async1() {
            //     console.log("async1 start")
            //     await new Promise(resolve => {
            //         console.log("promise1")
            //         resolve("promise1 resolve")
            //     }).then(res => console.log(res))
            //     console.log("async1 success")
            //     return "async1 end"
            // }
            // console.log("srcipt start")
            // async1().then(res => console.log(res))
            // console.log("srcipt end")
            /*******************************************************/
            // async function async1() {
            //     console.log("async1 start")
            //     await async2()
            //     console.log("async1 end")
            //     setTimeout(() => {
            //         console.log("timer1")
            //     }, 0)
            // }
            // async function async2() {
            //     setTimeout(() => {
            //         console.log("timer2")
            //     }, 0)
            //     console.log("async2")
            // }
            // async1()
            // setTimeout(() => {
            //     console.log("timer3")
            // }, 0)
            // console.log("start")
            /*******************************************************/
            // function runAsync(x) {
            //     const p = new Promise(r => setTimeout(() => r(x, console.log(x)), 1000))
            //     return p
            // }
            // function runReject(x) {
            //     const p = new Promise((res, rej) => setTimeout(() => rej(`Error: ${x}`, console.log(x)), 1000 * x))
            //     return p
            // }
            // Promise.race([runReject(0), runAsync(1), runAsync(2), runAsync(3)])
            //     .then(res => console.log("result: ", res))
            //     .catch(err => console.log(err))

            /*******************************************************/

            /*******************************************************/
            // Promise.resolve("1")
            //     .then(res => {
            //         console.log(res)
            //     })
            //     .finally(() => {
            //         console.log("finally")
            //     })
            // const res = Promise.resolve("2")
            //     .finally(() => {
            //         console.log("finally2")
            //         return "我是finally2返回的值"
            //     })
            //     .then(res => {
            //         console.log("finally2后面的then函数", res)
            //         throw Error("error")
            //     })
            // console.log(res)
            // setTimeout(() => {
            //     console.log(res)
            // }, 2000)
            /*******************************************************/
            // const p1 = new Promise(resolve => {
            //     setTimeout(() => {
            //         resolve("resolve3")
            //         console.log("timer1")
            //     }, 0)
            //     resolve("resovle1")
            //     resolve("resolve2")
            // })
            //     .then(res => {
            //         console.log(res) //
            //         setTimeout(() => {
            //             console.log(p1)
            //         }, 1000)
            //     })
            //     .finally(res => {
            //         console.log("finally", res)
            //     })
        </script>
    </body>
</html>
